<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Markdown Editor</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-white">
    <div class="max-w-full mx-auto p-4 pt-6 md:p-6 lg:p-8">
        <h1 class="text-3xl text-center mb-4">Markdown Editor</h1>
        <div class="flex flex-row">
            <div class="editor p-4 rounded-lg border border-gray-200 w-full md:w-1/2">
                <textarea id="editor" class="w-full h-screen p-2 border border-gray-200 rounded-lg" placeholder="Type your Markdown here..."></textarea>
            </div>
            <div class="preview p-4 rounded-lg border border-gray-200 w-full md:w-1/2 ml-2 md:ml-4 lg:ml-8">
                <div id="preview"></div>
            </div>
        </div>
        <!-- <p class="text-center mt-4">Built on <a href="https://cerebrascoder.com">Cerebras Coder</a></p> -->
    </div>

    <script>
        const editor = document.getElementById('editor');
        const preview = document.getElementById('preview');

        // Initialize textarea with default markdown
        const defaultMarkdown = `
# Introduction to Markdown
Markdown is a lightweight markup language that is easy to read and write. It is often used for formatting text in plain text editors, chat applications, and even web pages.

## Headers
Headers are denoted by the # symbol followed by a space. The number of # symbols determines the level of the header:
# Heading 1
## Heading 2
### Heading 3

## Emphasis
You can use emphasis to make your text **bold** or *italic*:
*Italics*
**Bold**

## Lists
You can use lists to organize your text:
* Item 1
* Item 2
* Item 3
Or
1. Item 1
2. Item 2
3. Item 3

## Links
You can use links to reference external resources:
[Google](https://www.google.com)

## Images
You can use images to add visual content:
![Markdown Logo](https://upload.wikimedia.org/wikipedia/commons/thumb/4/48/Markdown-mark.svg/208px-Markdown-mark.svg.png)
`;
        editor.value = defaultMarkdown;

        // Update preview on input
        editor.addEventListener('input', () => {
            const markdown = editor.value;
            const html = markdownToHtml(markdown);
            preview.innerHTML = html;
        });

        // Initialize preview with default markdown
        const defaultHtml = markdownToHtml(defaultMarkdown);
        preview.innerHTML = defaultHtml;

        // Function to convert Markdown to HTML
        function markdownToHtml(markdown) {
            // Bold
            markdown = markdown.replace(/\*\*(.*?)\*\*/g, '<b>$1</b>');

            // Italic
            markdown = markdown.replace(/\*(.*?)\*/g, '<i>$1</i>');

            // Links
            markdown = markdown.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2">$1</a>');

            // Images
            markdown = markdown.replace(/!\[(.*?)\]\((.*?)\)/g, '<img src="$2" alt="$1">');

            // Headings
            markdown = markdown.replace(/(^#{1,6} )(.*)/gm, (match, level, text) => {
                return `<h${level.length}>${text}</h${level.length}>`;
            });

            // Lists
            markdown = markdown.replace(/^(\*|\d+\.) (.*)/gm, (match, marker, text) => {
                if (marker.startsWith('*')) {
                    return `<li>${text}</li>`;
                } else {
                    return `<li>${text}</li>`;
                }
            });

            // Line breaks
            markdown = markdown.replace(/\n/g, '<br>');

            // Fix for nested lists
            markdown = markdown.replace(/<li><li>/g, '<li>');
            markdown = markdown.replace(/<\/li><\/li>/g, '</li>');

            // Wrap lists in ul
            markdown = markdown.replace(/(<li>.*<\/li>)/g, '<ul>$1</ul>');

            return markdown;
        }
    </script>
</body>
</html>